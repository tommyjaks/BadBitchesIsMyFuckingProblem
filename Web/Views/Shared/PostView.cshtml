@model WebData.Post


@{

    Layout = null;
}
<script src="~/Scripts/jquery-1.10.2.js"></script>



<h2>Create a new message</h2>

<div>
   
    @Html.TextArea("Message")
    @Html.HiddenFor(m => m.RecieverID, "RecieverID")

</div>

<div>
    <button id="btnSend">Send</button>

</div>
@*<div>
    <button id="btnGetPosts">Show Posts</button>

</div>*@

<div id="userPosts"></div>

<script>
    $(document).ready(function() {


        //    $.getJSON('/api/Posts/GetPostsForOtherUsers',
        //function(data){
        //    $('#userPosts').empty($());
        //    if (data.status == 1){
        //        $.each(data.result, function(){
        //            $('#userPosts').append(
        //            '<result>'+
        //            '<p class="stad"><h3>Stad</h3> ' +this.Body + '</p>' +

        //            '_________________'+
        //            '</result>'
        //           );
        //        });
        //    }
        //}
        //);
        //});


        $("#btnSend").click(function() {


            var messageInfo = {
                "Body": $("#Message").val(),
                "RecieverID": $("#RecieverID").val()

            };

            $.ajax({
                type: "POST",
                url: '/api/Posts/AddPost',
                data: JSON.stringify(messageInfo),
                contentType: "application/json;charset=utf-8",
                processData: true,
                success: function(data, status, xhr) {
                    alert("Your message has been posted, what a " + status);
                },
                error: function(xhr) {
                    alert(xhr.responseText);
                }
            });
        });


    });
</script>



